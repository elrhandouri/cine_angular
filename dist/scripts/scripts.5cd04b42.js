"use strict";angular.module("cineAngularApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/popular",{templateUrl:"views/movies.html",controller:"PopularCtrl",controllerAs:"popular"}).when("/search/:query",{templateUrl:"views/movies.html",controller:"SearchCtrl",controllerAs:"search"}).when("/info/:id",{templateUrl:"views/info.html",controller:"InfoCtrl",controllerAs:"info"}).otherwise({redirectTo:"/popular"})}]),angular.module("cineAngularApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("cineAngularApp").controller("AboutCtrl",["$scope","$q",function(a,b){function c(a){return a+=" Hood",Math.random()>=.5?!0:!1}this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var d=0;a.testPromise=function(a){if(a){var b=++d,c=document.getElementById("log");c.insertAdjacentHTML("beforeend",b+") Started (<small>Sync code started</small>)<br/>");var e=new Promise(function(d,e){c.insertAdjacentHTML("beforeend",b+") Promise started (<small>Async code started</small>)<br/>"),window.setTimeout(function(){a?d(b):e(b)},2e3*Math.random()+1e3)});e.then(function(a){c.insertAdjacentHTML("beforeend",a+") Promise fulfilled (<small>Async code terminated</small>)<br/>")})["catch"](function(a){console.log("Handle rejected promise ("+a+") here.")}),c.insertAdjacentHTML("beforeend",b+") Promise made (<small>Sync code terminated</small>)<br/>")}},a.testPromise(!1);var e=document.getElementById("log2");!function(a,b,c){function d(c){return a(function(a,d){setTimeout(function(){b(c)?a("Hello, "+c+"!"):d("Greeting "+c+" is not allowed.")},1e3)})}var e=d("Robin");e.then(function(a){c.insertAdjacentHTML("beforeend","2.Success: "+a+"<br/>")},function(a){c.insertAdjacentHTML("beforeend","2.Failed: "+a+"<br/>")})}(b,c,e),function(a,b,c){function d(c){var d=a.defer();return setTimeout(function(){d.notify("About to greet "+c+"."),b(c)?d.resolve("Hello, "+c+"!"):d.reject("Greeting "+c+" is not allowed.")},1e3),d.promise}var e=d("Robin Hood");e.then(function(a){c.insertAdjacentHTML("beforeend","3.Success: "+a+"<br/>")},function(a){c.insertAdjacentHTML("beforeend","3.Failed: "+a+"<br/>")},function(a){c.insertAdjacentHTML("beforeend","3.Got notification: "+a+"<br/>")})}(b,c,e)}]),angular.module("cineAngularApp").controller("PopularCtrl",["$scope","$log","serviceAjax",function(a,b,c){a.totalPages=0,a.currentPage=1,a.totalItems=200,a.itemsPerPage=20,a.maxSize=5;var d=function(){a.loading=!0,c.popular(a.currentPage).then(function(b){b=b.data,a.movies=b.results,a.totalPages=b.totalPages,a.loading=!1})};a.pageChanged=function(){d()},a.pageChangedLog=function(){b.log("Page changed to: "+a.currentPage)},a.setPage=function(b){a.currentPage=b};var e=function(){d()};a.currentPageNumber=function(){return a.currentPage},a.$watch(a.currentPageNumber,e),a.predicate="",a.reverse=!1,a.order=function(b){a.reverse=a.predicate===b?!a.reverse:!1,a.predicate=b}}]),angular.module("cineAngularApp").factory("serviceAjax",["$http",function(a){return{popular:function(b){return a.get("http://localhost:3000/popular?page="+b)},search:function(b,c){return a.get("http://localhost:3000/search?page="+b+"&q="+c)},similar:function(b){return a.get("http://localhost:3000/similar/:id?page="+b)},info:function(b){return a.get("http://localhost:3000/info/"+b)}}}]),angular.module("cineAngularApp").controller("HeaderCtrl",["$scope","$location",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.query="",a.searchAction=function(){b.path("/search/"+a.query)}}]),angular.module("cineAngularApp").controller("SearchCtrl",["$scope","$location","$routeParams","serviceAjax","$log",function(a,b,c,d,e){a.query=c.query,a.itemsPerPage=20,a.maxSize=5,a.loadMovies=function(){a.loading=!0,d.search(a.currentPage,a.query).success(function(b){a.movies=b.results,a.totalItems=b.totalResults,a.loading=!1})},a.pageChanged=function(){a.loadMovies()},a.pageChangedLog=function(){e.log("Page changed to: "+a.currentPage)},a.setPage=function(b){a.currentPage=b};var f=function(){a.loadMovies()};a.currentPageNumber=function(){return a.currentPage},a.$watch(a.currentPageNumber,f)}]),angular.module("cineAngularApp").controller("InfoCtrl",["$scope","$routeParams","serviceAjax","$log",function(a,b,c,d){var e=b.id;a.infoMovie=function(){a.loading=!0,c.info(e).success(function(b){a.movie=b,a.loading=!1})},a.pageChanged=function(){a.infoMovie(),d.log("Page changed to: "+a.currentPage)},a.infoMovie()}]),angular.module("cineAngularApp").directive("loading",function(){return{restrict:"A",transclude:!0,replace:!0,scope:{load:"=loading"},template:'<div><div ng-show="load" class="loading-container"></div><div ng-hide="load" ng-transclude></div></div>',compile:function(a){var b={lines:13,length:28,width:14,radius:42,scale:.75,corners:1,color:"#a7a7a7",opacity:.3},c=new window.Spinner(b).spin(),d=a.find(".loading-container")[0];d.appendChild(c.el)}}}),angular.module("cineAngularApp").run(["$templateCache",function(a){a.put("views/about.html",'<p>This is the about view.</p> <div ng-hide="false"> <button ng-click="testPromise(true);">Promise</button> <div id="log"></div> <div id="log2"></div> </div> <style media="screen" type="text/css">[class*="col-"], footer {\n\n  background-color: lightgreen;\n\n  border: 2px solid black;\n\n  border-radius: 6px;\n\n  line-height: 40px;\n\n  text-align: center;\n}\n    \n    .col-lg-offset-6 {\n\n      margin-left: 50%;\n\n    }\n    \n    .col-lg-offset-4 {\n\n      margin-left: 33%;\n\n    }\n    \n    .col-lg-offset-3 {\n\n      margin-left: 25%;\n\n    }\n    \n    .btn-lg {\n\n  width: 50px;\n\n  height: 50px;\n\n  border-radius: 25px;\n\n}</style> <header class="page-header"> <h1>col-lg-*, col-lg-offset-* :</h1> </header> <div class="container"> <div class="row"> <div class="col-lg-2">2 col</div> <div class="col-lg-2 col-lg-offset-3">2 colonnes</div> <div class="col-lg-5">5 colonnes</div> </div> <div class="row"> <div class="col-lg-2">2 colonnes</div> <div class="col-lg-9">9 colonnes</div> </div> <div class="row"> <div class="col-lg-4 col-lg-offset-4">4 colonnes</div> <div class="col-lg-4">4 colonnes</div> </div> </div> <header class="page-header"> <h1>col-lg-push-* col-lg-pull-*:</h1> </header> <div class="container"> <div class="row"> <div class="col-lg-12">12 colonnes <div class="row"> <div class="col-lg-2 col-lg-push-10">Colonne 1</div> <div class="col-lg-2 col-lg-push-3">Colonne 2</div> <div class="col-lg-2 col-lg-pull-1">Colonne 3</div> </div> </div> </div> </div> <header class="page-header"> <h1>Menu : </h1> </header> <div class="row"> <nav class="col-sm-2"> Menu </nav> <section class="col-sm-10"> Section <div class="row"> <article class="col-md-10"> Article </article> <aside class="col-md-2"> Aside </aside> </div> </section> </div> <header class="page-header"> <h1>form : </h1> </header> <form class="well"> <legend>Si vous voulez me laisser un message</legend> <h4>Comment m\'avez-vous trouvé ?</h4> <fieldset> <div class="radio"> <label for="ami" class="radio"> <input type="radio" name="origine" value="ami" id="ami"> Par un ami </label> </div> <div class="radio"> <label for="web" class="radio"> <input type="radio" name="origine" value="web" id="web"> Sur le web </label> </div> <div class="radio"> <label for="hasard" class="radio"> <input type="radio" name="origine" value="hasard" id="hasard"> Par hasard </label> </div> <div class="radio"> <label for="autre" class="radio"> <input type="radio" name="origine" value="autre" id="autre"> Autre... </label> </div> <label for="textarea">Votre message :</label> <textarea id="textarea" class="form-control" rows="4"></textarea> <p class="help-block">Vous pouvez agrandir la fenêtre</p> <button class="btn btn-primary" type="submit">Envoyer</button> </fieldset> </form> Et le code HTML : <button class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-user"></span></button> <button class="btn btn-warning btn-lg"><span class="glyphicon glyphicon-comment"></span></button> <button class="btn btn-success btn-lg"><span class="glyphicon glyphicon-calendar"></span></button> <button class="btn btn-danger btn-lg"><span class="glyphicon glyphicon-shopping-cart"></span></button> <button class="btn btn-info btn-lg"><span class="glyphicon glyphicon-bullhorn"></span></button>'),a.put("views/info.html",'<div class="movie-container" id="top" loading="loading"> <ul class="movie"> <div class="row"> <div class="col-md-4"> <img ng-src="http://image.tmdb.org/t/p/w500{{movie.poster_path}}" width="200" height="300"> </div> <div class="col-md-8"> <a ng-href="#/info/{{movie.id}}"><h4 ng-bind="movie.title"></h4></a> <a ng-href="{{movie.homepage}}"><h4>Homepage</h4></a> <a ng-href="http://www.imdb.com/title/{{movie.imdb_id}}"><img alt="on IMDb" src="http://g-ecx.images-amazon.com/images/G/01/imdb/plugins/rating/images/imdb_46x22.png"></a><br> <label>Année : </label><span class="date" ng-bind="movie.release_date | date:\'yyyy\'"></span><br> <label>Note : </label><rating ng-model="movie.vote_average" max="10" readonly></rating>(<span ng-bind="movie.vote_count"></span> avis)<br> <dt>Genre : </dt> <dd> <ul> <li ng-repeat="genre in movie.genres">{{genre.name}}</li> </ul> </dd> <label>Budget : </label><span ng-bind="\'$\' + movie.budget"></span><br> <label>Runtime : </label><span ng-bind="movie.runtime + \'min\'">min</span><br> <label>Synopsis : </label><div ng-bind="movie.overview"></div><br> </div> </div> </ul> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.8cb970fb.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/movies.html","<style>.sortorder:after {\n      content: '\\25b2';\n    }\n    .sortorder.reverse:after {\n      content: '\\25bc';\n"+'    }</style> <table class="movies" ng-show="movies.length > 1" ng-show="!loading" class="btn-group"> <tr> <th> <button ng-click="order(\'title\')" class="btn btn-primary">By Name</button><!-- add the reverse class if reverse is true --> <span class="sortorder" ng-show="predicate === \'title\'" ng-class="{reverse:reverse}"></span> </th> <th> <button ng-click="order(\'vote_average\')" class="btn btn-success">By Rating</button> <span class="sortorder" ng-show="predicate === \'vote_average\'" ng-class="{reverse:reverse}"></span> </th> <th> <button ng-click="predicate=\'\'; reverse=false" class="btn btn-danger">Popular</button> </th> </tr> </table>  <uib-pagination ng-model="currentPage" total-items="totalItems" items-per-page="itemsPerPage" max-size="maxSize" boundary-links="true" rotate="false" ng-show="!loading"></uib-pagination> <div class="movies-container" id="top" loading="loading"> <ul class="movies"> <li ng-repeat="movie in movies | orderBy:predicate:reverse"> <div class="row"> <div class="col-md-4"> <img ng-src="http://image.tmdb.org/t/p/w500{{movie.poster_path}}" width="200" height="300"> </div> <div class="col-md-8"> <a ng-href="#/info/{{movie.id}}"><h4 ng-bind="movie.title"></h4></a> <label>Année:</label><span class="date" ng-bind="movie.release_date | date:\'yyyy\'"></span><br> <label>Note:</label><uib-rating ng-model="movie.vote_average" max="10" readonly></uib-rating>(<span ng-bind="movie.vote_count"></span> avis)<br> </div> </div> </li> </ul> </div> <uib-pagination ng-model="currentPage" total-items="totalItems" items-per-page="itemsPerPage" max-size="maxSize" ng-change="pageChangedLog()" boundary-links="true" rotate="false" ng-show="!loading"></uib-pagination>'),a.put("views/popular.html",'<p>This is the popular view.</p> <label>Current Page Number : </label><span> {{currentPage}}</span> <uib-pagination ng-model="currentPage" total-items="totalItems" items-per-page="itemsPerPage" max-size="maxSize" boundary-links="true" rotate="false"></uib-pagination> <div class="movies-container" id="top"> <ul class="movies"> <li ng-repeat="movie in movies"> <div class="row"> <div class="col-md-4"> <img ng-src="http://image.tmdb.org/t/p/w500{{movie.poster_path}}" width="200" height="300"> </div> <div class="col-md-8"> <a ng-href="#/info/{{movie.id}}"><h4 ng-bind="movie.title"></h4></a> <label>Année:</label><span class="date" ng-bind="movie.release_date | date:\'yyyy\'"></span><br> <label>Note:</label><rating ng-model="movie.vote_average" max="10" readonly></rating>(<span ng-bind="movie.vote_count"></span> avis)<br> </div> </div> </li> </ul> </div> <label>Current Page Number : </label><span> {{currentPage}}</span> <uib-pagination ng-model="currentPage" total-items="totalItems" items-per-page="itemsPerPage" max-size="maxSize" ng-change="pageChangedLog()" boundary-links="true" rotate="false"></uib-pagination>'),a.put("views/search.html","<p>This is the search view.</p>")}]);